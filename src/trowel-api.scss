@import 'core/statement';
@import 'core/breakpoints';
@import 'core/selector';

// statement
@mixin statement($selector, $block, $flag: null) {
  $block: block-sorted($block);
  @include print-statement($selector, $block, $flag);
}


// media-query
@mixin media-query ($fork, $philosophy: 'and-more') {
  $breakpoints-config: map-get($trowel-config, 'breakpoints');

  @if not $breakpoints-config or not $fork {
    @content;
  } @else {
    $breakpoints: breakpoints--constructor($breakpoints-config);

    @if not breakpoint--get-fork-query($breakpoints, $fork, $philosophy) {
      @content;
    } @else {
      @media #{breakpoint--get-fork-query($breakpoints, $fork, $philosophy)} {
        @content;
      }
    }
  }
}


@mixin selector($selector) {
  $breakpoint-fork: selector--get-breakpoint($selector);

  @at-root #{selector--get-print-parents($selector) + selector--get-print($selector)} {
    @include media-query($breakpoint-fork) {
      @content;
    }
  }
}